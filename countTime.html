<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/count.css" />
    <link rel="stylesheet" href="./css/global.css" />
    <title>
      Goals - POMODORO
    </title>
    <meta charset="utf-8" />
  </head>
  <body>
    <div id="nav-bar-container"></div>
    <main>
      <div id="textStyle"></div>
      <button class="buttonStyle btn btn-outline-primary" onclick="countTime()">
        Start
      </button>
    </main>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/render_navbar.js"></script>
    <script>
      const textStyleDOM = document.querySelector("#textStyle");
      const buttonStyleDOM = document.querySelector(".buttonStyle");
      const checkTime = (m, s) => {
        return m == 0 && s == 0;
      };
      const renderTime = x => (x < 10 ? "0" + x : x.toString());
      function countTime() {
        let min = 25,
          second = 1;
        const timer = setInterval(() => {
          if (second == 0) {
            second = 60;
            min--;
          }
          second--;

          textStyleDOM.innerHTML = renderTime(min) + ":" + renderTime(second);
          textStyleDOM.classList.add("TextStyle");
          buttonStyleDOM.style.display = "none";

          if (checkTime(min, second)) {
            clearInterval(timer);
            setTimeout(() => alert("倒计时结束！"), 0);
          }
        }, 1000);
      }
    </script>
  </body>
</html>
